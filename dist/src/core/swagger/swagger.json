{
    "openapi": "3.0.0",
    "info": {
        "title": "CXplorers",
        "description": "Endpoints",
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "https://cxplorers-app.up.railway.app/"
        }
    ],
    "paths": {
        "/calendars/secure/create": {
            "post": {
                "tags": [
                    "Calendars"
                ],
                "description": "Create calendar",
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/createCalendar"
                            }
                        }
                    }
                }
            }
        },
        "/calendars/secure/resource/{calendarId}": {
            "get": {
                "tags": [
                    "Calendars"
                ],
                "description": "get calendar by id",
                "parameters": [
                    {
                        "name": "calendarId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/calendars/secure/collection": {
            "get": {
                "tags": [
                    "Calendars"
                ],
                "description": "get users calendars",
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/calendars/secure/{calendarId}": {
            "delete": {
                "tags": [
                    "Calendars"
                ],
                "description": "Delete calendars",
                "parameters": [
                    {
                        "name": "calendarId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/contacts/secure/create": {
            "post": {
                "tags": [
                    "Contacts"
                ],
                "description": "create contact",
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/createContact"
                            }
                        }
                    }
                }
            }
        },
        "/contacts/secure/resource/{contactId}": {
            "get": {
                "tags": [
                    "Contacts"
                ],
                "description": "get contact by id",
                "parameters": [
                    {
                        "name": "contactId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/contacts/secure/collection": {
            "get": {
                "tags": [
                    "Contacts"
                ],
                "description": "get users contacts",
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/contacts/secure/{contactId}": {
            "put": {
                "tags": [
                    "Contacts"
                ],
                "description": "update contact",
                "parameters": [
                    {
                        "name": "contactId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/updateContact"
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Contacts"
                ],
                "description": "deletecontact",
                "parameters": [
                    {
                        "name": "contactId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/google/secure/url": {
            "get": {
                "tags": [
                    "Google"
                ],
                "description": "get google auth href",
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/google/secure/calendars": {
            "get": {
                "tags": [
                    "Google"
                ],
                "description": "get users calendars from drive",
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/google/secure/calendars/sync/{calendarId}": {
            "get": {
                "tags": [
                    "Google"
                ],
                "description": "sync users calendar",
                "parameters": [
                    {
                        "name": "calendarId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Google"
                ],
                "description": "unSync users calendar",
                "parameters": [
                    {
                        "name": "calendarId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/calendars/secure/events/:calendarId": {
            "post": {
                "tags": [
                    "Google"
                ],
                "description": "create event",
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/createEvent"
                            }
                        }
                    }
                }
            }
        },
        "/google/secure/calendars/events/{eventId}": {
            "delete": {
                "tags": [
                    "Google"
                ],
                "description": "delete an event",
                "parameters": [
                    {
                        "name": "eventId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/calendars/notifications": {
            "post": {
                "description": "",
                "responses": {
                    "default": {
                        "description": ""
                    }
                }
            }
        },
        "/tokens/secure/create": {
            "post": {
                "tags": [
                    "Tokens"
                ],
                "description": "create token",
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/createToken"
                            }
                        }
                    }
                }
            }
        },
        "/tokens/secure/resource/{tokenId}": {
            "get": {
                "tags": [
                    "Tokens"
                ],
                "description": "get token by id",
                "parameters": [
                    {
                        "name": "tokenId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/tokens/secure/{tokenId}": {
            "delete": {
                "tags": [
                    "Tokens"
                ],
                "description": "delete token by id",
                "parameters": [
                    {
                        "name": "tokenId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/users/secure/resource": {
            "get": {
                "tags": [
                    "Users"
                ],
                "description": "Get current user",
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/users/secure/account": {
            "put": {
                "tags": [
                    "Users"
                ],
                "description": "update user account details, if updating password the users current password must be provided",
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/updateUser"
                            }
                        }
                    }
                }
            }
        },
        "/users/secure/delete": {
            "delete": {
                "tags": [
                    "Users"
                ],
                "description": "Delete current user",
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/users/verified/create": {
            "post": {
                "tags": [
                    "Users"
                ],
                "description": "create user user. must enter the code from thier email",
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/createUser"
                            }
                        }
                    }
                }
            }
        },
        "/users/verified/account/{userId}": {
            "put": {
                "tags": [
                    "Users"
                ],
                "description": "update user account details with verification code. user must enter the code from thier email",
                "parameters": [
                    {
                        "name": "userId",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/verifiedUpdateUser"
                            }
                        }
                    }
                }
            }
        },
        "/users/login": {
            "post": {
                "tags": [
                    "Users"
                ],
                "description": "user login",
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/login"
                            }
                        }
                    }
                }
            }
        },
        "/users/account-recovery": {
            "post": {
                "tags": [
                    "Users"
                ],
                "description": "Send account recovery will return a token, email contains a code that the user needs to input for the next request",
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/accountRecovery"
                            }
                        }
                    }
                }
            }
        },
        "/users/verify-email": {
            "post": {
                "tags": [
                    "Users"
                ],
                "description": "verify user email, token recieved must be used for create user request. for update email verification add query /users/verify-email?update=true",
                "responses": {
                    "default": {
                        "description": ""
                    }
                },
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/verifyEmail"
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "securitySchemes": {
            "bearerAuth": {
                "type": "apiKey",
                "name": "Authorization",
                "in": "header",
                "description": "Enter JWT token with **Bearer** prefix. Example: \"Bearer {token}\""
            }
        },
        "schemas": {
            "createUser": {
                "type": "object",
                "properties": {
                    "email": {
                        "type": "string",
                        "example": "email"
                    },
                    "password": {
                        "type": "string",
                        "example": "password"
                    },
                    "name": {
                        "type": "string",
                        "example": "name"
                    },
                    "phone": {
                        "type": "string",
                        "example": "phone number"
                    },
                    "code": {
                        "type": "string",
                        "example": "code from users email"
                    }
                }
            },
            "updateUser": {
                "type": "object",
                "properties": {
                    "phone": {
                        "type": "string",
                        "example": "phone"
                    },
                    "name": {
                        "type": "string",
                        "example": "name"
                    },
                    "password": {
                        "type": "string",
                        "example": "new passoword"
                    },
                    "oldPassword": {
                        "type": "string",
                        "example": "old password"
                    }
                }
            },
            "verifiedUpdateUser": {
                "type": "object",
                "properties": {
                    "email": {
                        "type": "string",
                        "example": "new email"
                    },
                    "password": {
                        "type": "string",
                        "example": " new password"
                    },
                    "code": {
                        "type": "string",
                        "example": "code from users email"
                    }
                }
            },
            "login": {
                "type": "object",
                "properties": {
                    "email": {
                        "type": "string",
                        "example": "email"
                    },
                    "password": {
                        "type": "string",
                        "example": "password"
                    }
                }
            },
            "accountRecovery": {
                "type": "object",
                "properties": {
                    "email": {
                        "type": "string",
                        "example": "email"
                    }
                }
            },
            "verifyEmail": {
                "type": "object",
                "properties": {
                    "email": {
                        "type": "string",
                        "example": "new email"
                    }
                }
            },
            "createToken": {
                "type": "object",
                "properties": {
                    "token": {
                        "type": "string",
                        "example": "token"
                    },
                    "userId": {
                        "type": "string",
                        "example": "uuid"
                    },
                    "type": {
                        "type": "string",
                        "example": "refresh or access"
                    },
                    "service": {
                        "type": "string",
                        "example": "google"
                    }
                }
            },
            "updateToken": {
                "type": "object",
                "properties": {
                    "token": {
                        "type": "string",
                        "example": "new Token"
                    }
                }
            },
            "createCalendar": {
                "type": "object",
                "properties": {
                    "referenceId": {
                        "type": "string",
                        "example": "id from google"
                    },
                    "title": {
                        "type": "string",
                        "example": "summary from google"
                    },
                    "description": {
                        "type": "string",
                        "example": "from google default null"
                    },
                    "backgroundColor": {
                        "type": "string",
                        "example": "from google default null"
                    },
                    "forgroundColor": {
                        "type": "string",
                        "example": "from google default null"
                    }
                }
            },
            "createContact": {
                "type": "object",
                "properties": {
                    "firstName": {
                        "type": "string",
                        "example": "required"
                    },
                    "lastName": {
                        "type": "string",
                        "example": "optional"
                    },
                    "email": {
                        "type": "string",
                        "example": "optional"
                    },
                    "phone": {
                        "type": "string",
                        "example": "optional"
                    }
                }
            },
            "updateContact": {
                "type": "object",
                "properties": {
                    "firstName": {
                        "type": "string",
                        "example": "optional"
                    },
                    "lastName": {
                        "type": "string",
                        "example": "optional"
                    },
                    "email": {
                        "type": "string",
                        "example": "optional"
                    },
                    "phone": {
                        "type": "string",
                        "example": "optional"
                    }
                }
            },
            "createEvent": {
                "type": "object",
                "properties": {
                    "summary": {
                        "type": "string",
                        "example": "title"
                    },
                    "startTime": {
                        "type": "string",
                        "example": "isoDateString"
                    },
                    "endTime": {
                        "type": "string",
                        "example": "isoDateString"
                    },
                    "attendees": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "email": {
                                    "type": "string",
                                    "example": "attendees is optional"
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
